# 虚拟机 Centos7（非LVM）扩容

## 进入VM，选择“虚拟机——>设置”

选择硬盘，看到扩展为置灰状态（看提示信息，发现有快照的，不能扩容），删除快照，可以扩容成功。

## 进入centos，fdisk 扩容

```bash

fdisk /dev/sda

# 查看分区，P， 选择最后扩容的分区，注意看起始扇区。
# 删除原来的分区 D
# 新增分区 N， 对齐扇区
# 保存写入 W

```

## Reboot, 使用命令扩容

- xfs 格式，xfs_growfs

- ext 格式，resize2fs

```bash
  xfs_growfs /dev/sda3  
  df -h
```

由于我们的sda3挂载在根目录下，sda3是最后一个分区，所以刚好新增的空间跟sda3是连续的，在最后选择start和end的时候，刚好就能连接上，这也是成功的一个条件，如果不是最后一个分区挂载在根目录下，这个就比较麻烦，需要进一步研究。建议新建虚拟机的时候，选择用LVM来管理分区，这样就好好解决以上的问题了。